-- Dataform table definition for F_GAMINGRATING
-- Source: Sybase
-- Domain: Gaming Activity & Performance
-- Dataset: crown_gaming_activity

config {
  type: "table",
  schema: "crown_gaming_activity",
  description: "Migrated from Sybase - Gaming Activity & Performance",
  bigquery: {,
    partitionBy: "RATINGSTARTDTTM",
    clusterBy: ["RATINGHOURID", "PATRONID", "CASINOLOCATIONID", "CASINOLOCDETID"],
  }
}

SELECT
  RATINGHOURID STRING NOT NULL,
  PATRONID STRING NOT NULL,
  CASINOLOCATIONID STRING NOT NULL,
  CASINOLOCDETID STRING NOT NULL,
  PRODUCTID STRING NOT NULL,
  PRODUCTDETID STRING NOT NULL,
  GAMINGMACHINEID STRING NOT NULL,
  TRANSTYPEID STRING NOT NULL,
  AGEID STRING NOT NULL,
  RATINGID STRING NOT NULL,
  LEGACYPATRONID STRING NOT NULL,
  RATINGSTARTDTTM STRING,
  RATINGENDDTTM STRING,
  TURNOVER STRING,
  BUYIN STRING,
  AVGBET STRING,
  ACTUALWIN STRING,
  THEOWIN STRING,
  JACKPOT STRING,
  BONUS STRING,
  SECONDSPLAYED STRING,
  HOURSPLAYED STRING,
  PNTSEARNED STRING,
  EGM_PNTSEARNED STRING,
  CASINOCASHEARNED STRING,
  VIP_PNTSEARNED STRING,
  TBLPNTSEARNED STRING,
  PROGNUM STRING,
  VALIDCODE STRING,
  SUPERID STRING,
  DEALERID STRING,
  EGMStroke STRING,
  GameWins STRING,
  RatingEndHrID STRING NOT NULL,
  NumBets STRING,
  ProgID STRING NOT NULL,
  ProgOfcID STRING,
  JnktRatingFlg STRING,
  ProgCompValEarned STRING,
  DeptID STRING NOT NULL,
  TblChipsIn STRING,
  TblCshIn STRING,
  TblCheqIn STRING,
  LimitHitHrID STRING NOT NULL,
  PatronAncillaryCardID STRING NOT NULL,
  StsID STRING NOT NULL,
  LimitHitDtandTm STRING,
  SiteID STRING NOT NULL,
  SctyCde STRING,
  LegacyAuditStsCde STRING,
  PntsEarnedFB STRING,
  PntsEarnedHotel STRING,
  PntsEarnedRetl STRING,
  PntsEarnedRetlTency STRING,
  GrossRev STRING,
  NetRev STRING,
  PointEarningRatio STRING,
  ETLJobDtlID STRING NOT NULL,
  PntsEarnedOther STRING,
  JkptProdTypID STRING NOT NULL,
  LicID STRING NOT NULL,
  EGMAdjustedTHEOWIN STRING,
  RatingType STRING,
  Terminallocationdetid STRING NOT NULL,
  CashlessIn NUMERIC
FROM `${ref('sybase_source')}`
